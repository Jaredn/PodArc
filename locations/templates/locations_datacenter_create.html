{% extends "PodArcbase.html" %}

{% block local_javascript %}
<script language="Javascript">
    function updateDeleteIdValue(deleteId){
        document.getElementById("input_delete_id").value = deleteId;
        document.getElementById("form_delete").submit();
    }
</script>
{% endblock %}

{% block content %}
<div class="panel panel-primary">
    <div class="panel-heading">
        <h1 class="panel-title">
            Datacenters
            <span class="pull-right"><a href="" class="btn btn-success btn-xs" role="button" type="button" title='New Datacenter' data-toggle="modal" data-target="#Modal-CreateDatacenter""><span class='glyphicon glyphicon-plus'></span> Create New</a></span>
        </h1>
    </div>
    <div class="panel-body">
        <table class="table table-bordered table-striped table-condensed">
            <thead>
                <tr>
                	<th>Name</th>
                	<th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for row in datacenters %}
                    <tr>
                    	<td><a href='' >{{ row.name }}</a></td>
                    	<td><a href='' >{{ row.description }}</a></td>
                        <td><button class="btn btn-danger btn-xs" onclick="updateDeleteIdValue( {{ row.id }} )">Delete</button></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="panel-footer">
        Rows: {{ datacenters.count }}<span class="pull-right"><a href="" class="btn btn-success btn-xs" role="button" type="button" title='New Datacenter' data-toggle="modal" data-target="#Modal-CreateDatacenter""><span class='glyphicon glyphicon-plus'></span> Create New</a></span>
    </div>
</div>

<!-- Hidden Delete Form -->
<div class="hidden">
    <form id="form_delete" action="{% url 'locations_datacenter_create' %}" method="post">
        {% csrf_token %}
        <input id="input_delete_id" name="input_delete_id" type="hidden" value="0">
    </form>
</div>

<!-- MODALS -->
<!-- Create Datacenter -->
<div class="modal fade" id="Modal-CreateDatacenter" tabindex="-1" role="dialog" aria-labelledby="CreateDatacenterLabel" aria-hidden="true">
  <div class="modal-dialog modalwide">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h4 class="modal-title" id="CreateDatacenterLabel">Create Datacenter</h4>
	  </div>
	  <form action='{% url "locations_datacenter_create" %}' method="POST">
	  	  {% csrf_token %}
          <input type="hidden" name="CreateDatacenter" value="1">
		  <div class="modal-body">
            {{ form.as_p }}
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			<!-- Submit Button-->
			<button type="submit" class="btn btn-success btn-sm"><span class="glyphicon glyphicon-plus"></span> Create Datacenter</button>
		  </div>
	  </form>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->




{% endblock %}